(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(48)},41:function(e,t,n){},42:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),o=n.n(i),c=n(7),s=n(14),l=n(30),u=(n(41),n(1)),m=n(2),p=n(4),h=n(3),d=n(5),v=n(10),f=n(16),b=(n(42),n(22));var g=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",logged_in:!1},n.handleChange=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.login(n.state.email,n.state.password).then(function(){return n.setState({email:"",password:"",logged_in:!0})})},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return!0===this.state.logged_in?r.a.createElement(f.a,{to:"/"}):null!==localStorage.getItem("jwt")?r.a.createElement(f.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"login-page-title"},"MovieTracker"),r.a.createElement("div",{className:"login-box"},r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("p",{className:"field-name"},"Email:"),r.a.createElement("input",{className:"login-field",type:"text",name:"email",onChange:function(t){return e.handleChange(t)},value:this.state.username}),r.a.createElement("br",null),r.a.createElement("p",{className:"field-name"},"Password:"),r.a.createElement("input",{className:"login-field",type:"password",name:"password",onChange:function(t){return e.handleChange(t)},value:this.state.password}),r.a.createElement("br",null),r.a.createElement("input",{className:"submitForm",type:"submit",value:"Log In"}))))}}]),t}(r.a.Component),O=Object(c.b)(null,function(e){return{login:function(t,n){return e(function(e,t){return function(n){return n({type:"LOGIN"}),fetch("/user_token",{method:"POST",body:JSON.stringify({auth:{email:e,password:t}}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("jwt",e.jwt)})}}(t,n))}}})(g),E=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(O,null))}}]),t}(r.a.Component),y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",placeholder:"Search for a movie..."},n.handleChange=function(e){n.setState({query:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.props.fetchMovies(n.state.query),n.setState({query:""})},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{className:"search-input",type:"text",onChange:this.handleChange,value:this.state.query,placeholder:this.state.placeholder}),r.a.createElement("input",{className:"submit-search",type:"submit"})))}}]),t}(r.a.Component),j=function(e){return r.a.createElement("button",{className:e.style,onClick:function(){return e.onClick(e.movie_info,e.list.id)}},e.movie_type)},_=function(e){return r.a.createElement("div",{className:"movie-shell"},r.a.createElement("div",{className:"movie-front",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w600_and_h900_bestv2/".concat(e.movie_info.poster_path,")")}},r.a.createElement(j,{style:e.style,onClick:e.onClick,movie_info:e.movie_info,movie_type:e.movie_type,list:e.list}),r.a.createElement(v.b,{className:"movie-link",key:e.movie_info.id,to:"/movies/".concat(e.movie_id)},e.movie_info.title.substring(0,20))))},w=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).renderMovies=function(){if(n.props.movies)return n.props.movies.map(function(e){return r.a.createElement(_,{style:n.props.style,movie_info:e,key:e.id,onClick:n.props.mutateMovie,movie_type:n.props.movie_type,list:n.props.list,movie_id:e.data_id||e.id})})},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.movieWrap},this.renderMovies())}}]),t}(r.a.Component);var S=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.clearMovie()}},{key:"render",value:function(){return r.a.createElement("div",{className:"search-container"},r.a.createElement(y,{fetchMovies:this.props.fetchMovies}),r.a.createElement(w,{style:"add-movie",movieWrap:"search-results",movies:this.props.movies,mutateMovie:this.props.addMovie,movie_type:"+",list:this.props.list}))}}]),t}(r.a.Component),C=Object(c.b)(function(e){return{movies:e.search.movies,list:e.lists.current_list,movie:e.movie.movie}},function(e){return{fetchMovies:function(t){return e(function(e){return function(t){return t({type:"LOADING_MOVIES"}),fetch("https://api.themoviedb.org/3/search/movie?api_key=a0290c76300b1f2e88f668e76490cd72&query=".concat(e)).then(function(e){return e.json()}).then(function(e){return t({type:"FETCH_MOVIES",payload:e.results})})}}(t))},addMovie:function(t,n){return e(function(e,t){var n="Bearer "+localStorage.getItem("jwt");return function(a){return a({type:"ADD_MOVIE"}),fetch("/movies",{method:"POST",body:JSON.stringify({data_id:e.id,title:e.title,poster_path:e.poster_path,overview:e.overview,runtime:e.runtime,tagline:e.tagline,list_id:t}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:n}}).then(function(e){return e.json()}).then(function(e){return a({type:"UPDATE_LIST",payload:e})})}}(t,n))},clearMovie:function(){return e({type:"CLEAR"})}}})(S),I=function(e){return r.a.createElement("div",{className:"list"},r.a.createElement(w,{style:e.style,movieWrap:"movie-list",movies:e.list.movies,movie_type:"-",mutateMovie:e.mutateMovie,list:e.list}))};function L(e){return function(t){t({type:"SWITCH_LIST",payload:e})}}var N=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={current_list:[n.props.current_list],selected_value:"0"},n.handleChange=function(e){n.setState({selected_value:e.target.value}),n.props.switchList(n.props.lists[e.target.value])},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.lists.length!==e.lists.length){this.props.switchList(this.props.current_list);var t=this.props.lists.map(function(e){return e.id}),n=this.props.current_list.id;console.log(this.props.lists),this.setState({selected_value:t.indexOf(n)})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("select",{className:"list-select",onChange:function(t){return e.handleChange(t)},value:this.state.selected_value},this.props.lists.map(function(e,t){return r.a.createElement("option",{value:t,key:e.id},e.name)})))}}]),t}(r.a.Component),k=Object(c.b)(function(e){return{current_list:e.lists.current_list}},function(e){return{switchList:function(t){return e(L(t))}}})(N),M=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={input:""},n.handleInput=function(e){n.setState({input:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),console.log("A"),n.props.createList(n.state.input),console.log("B"),n.setState({input:""}),n.props.modalClose(),n.props.switchList(n.props.lists[n.props.lists.length-1])},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return this.props.show?r.a.createElement("div",{className:"backdrop"},r.a.createElement("div",{className:"modal"},this.props.children,r.a.createElement("button",{className:"modal-x",onClick:this.props.modalClose},"X"),r.a.createElement("h1",null,"Create New List"),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{className:"modal-input",type:"text",placeholder:"Enter new list name...",onChange:function(t){return e.handleInput(t)}}),r.a.createElement("input",{className:"submitForm modal-submit",type:"submit"})),r.a.createElement("div",{className:"footer"}))):null}}]),t}(r.a.Component),T=Object(c.b)(function(e){return{lists:e.lists.lists}},function(e){return{createList:function(t){return e(function(e){var t="Bearer "+localStorage.getItem("jwt");return function(n){return n({type:"CREATE_LIST"}),fetch("/lists",{method:"POST",body:JSON.stringify({name:e,movies:[]}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:t}}).then(function(e){return e.json()}).then(function(e){n({type:"ADD_LIST",payload:e})})}}(t))},switchList:function(t){return e(L(t))}}})(M),A=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={show:[n.props.lists]},n.handleSubmit=function(){n.props.deleteList(n.props.current_list)},n.renderButton=function(){if(!0===n.props.show)return r.a.createElement("a",{className:"logout delete",href:"#",onClick:n.handleSubmit},"Delete List")},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderButton())}}]),t}(r.a.Component),D=Object(c.b)(function(e){return{current_list:e.lists.current_list,show:e.lists.lists.length>1}},function(e){return{deleteList:function(t){return e(function(e){var t="Bearer "+localStorage.getItem("jwt");return function(n){return n({type:"DELETE_LIST"}),fetch("/lists/".concat(e.id),{method:"DELETE",body:JSON.stringify({list:e}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:t}}).then(function(e){return e.json()}).then(function(e){return n({type:"REMOVE_LIST",payload:e})})}}(t))}}})(A),F=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={current_list_id:0,isOpen:!1},n.renderList=function(){if(n.props.lists.length>0)return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{current_list:n.props.current_list,lists:n.props.lists}),r.a.createElement(I,{list:n.props.current_list,mutateMovie:n.props.removeMovie,style:"remove-movie"}))},n.onChange=function(e){n.setCurrentListId()},n.setCurrentListId=function(){n.setState({current_list_id:n.props.lists[n.state.current_list_index].id})},n.toggleModal=function(){n.setState({isOpen:!n.state.isOpen})},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchList()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"list-container"},this.renderList(),r.a.createElement(D,null)))}}]),t}(r.a.Component),V=Object(c.b)(function(e){return{lists:e.lists.lists,current_list:e.lists.current_list}},function(e){return{fetchList:function(){return e(function(){var e="Bearer "+localStorage.getItem("jwt");return function(t){return t({type:"LOADING_LIST"}),fetch("/lists",{method:"GET",headers:{Authorization:e}}).then(function(e){return e.json()}).then(function(e){return t({type:"FETCH_LIST",payload:e,current_list:e[0]})})}}())},removeMovie:function(t,n){return e(function(e,t){var n="Bearer "+localStorage.getItem("jwt");return function(a){return a({type:"REMOVE_MOVIE"}),fetch("/lists/".concat(t),{method:"PUT",body:JSON.stringify({movie_id:e.id,list_id:t}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:n}}).then(function(e){return e.json()}).then(function(e){return a({type:"REMOVE_MOVIE_FROM_LIST",payload:e})})}}(t,n))}}})(F),x=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={showLink:n.props.showLink},n.renderNewListLink=function(){return window.location.href.indexOf("movie")<0?r.a.createElement("a",{className:"logout",href:"#",onClick:function(){return n.props.modalOpen()}},"New List"):null},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"nav-bar"},r.a.createElement("span",{className:"name"},r.a.createElement(v.b,{to:"/"},"MovieTracker")),r.a.createElement(v.b,{className:"logout",to:"/login",onClick:function(){return localStorage.clear()}},"Log Out"),this.renderNewListLink()))}}]),t}(r.a.Component),G=Object(c.b)(function(e){return{showLink:e.movie.movie}})(x),R=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={watched_movies:[],watched_movies_ids:[],isOpen:!1},n.toggleModal=function(){n.setState({isOpen:!n.state.isOpen})},n.handleModalOpen=function(){n.setState({isOpen:!0})},n.handleModalClose=function(){n.setState({isOpen:!1})},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{modalOpen:this.handleModalOpen}),r.a.createElement("div",{className:"wrapper"},r.a.createElement(T,{show:this.state.isOpen,modalClose:this.handleModalClose}),r.a.createElement(C,null),r.a.createElement(V,null)))}}]),t}(r.a.Component),B=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"movie-cover",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w1280/".concat(e.movie.backdrop_path,")")}},r.a.createElement("div",{className:"overlay"},r.a.createElement(v.b,{to:"/",className:"back-button"},"<"))),r.a.createElement("div",{className:"movie-page"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"movie-poster",src:"https://image.tmdb.org/t/p/w600_and_h900_bestv2/".concat(e.movie.poster_path),alt:e.movie.title})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("h1",null,e.movie.title),r.a.createElement("h3",null,"Runtime: ",e.movie.runtime," minutes"),r.a.createElement("h2",null,e.movie.tagline),r.a.createElement("p",{className:"overview"},e.movie.overview),r.a.createElement("p",{className:"rating"},"Rating: ",e.movie.vote_average,"/10"))))},H=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMovie(this.props.match.params.movieId)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement(B,{movie:this.props.movie})))}}]),t}(r.a.Component),J=Object(c.b)(function(e){return{movie:e.movie.movie}},function(e){return{fetchMovie:function(t){return e(function(e){return function(t){return t({type:"LOADING_MOVIE"}),fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=a0290c76300b1f2e88f668e76490cd72")).then(function(e){return e.json()}).then(function(e){return t({type:"FETCH_MOVIE",payload:e})})}}(t))}}})(H),P=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return null===localStorage.getItem("jwt")?r.a.createElement(f.a,{to:"/login"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",component:R}),r.a.createElement(f.b,{path:"/movies/:movieId",component:J}),r.a.createElement(f.b,{component:R})))}}]),t}(r.a.Component),W=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/login",component:E}),r.a.createElement(f.b,{path:"/",component:P}))))}}]),t}(r.a.Component);var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,movies:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_MOVIES":return Object.assign({},e,{loading:!0});case"FETCH_MOVIES":return{loading:!1,movies:t.payload};default:return e}},z=n(26),U=n(15);var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,lists:[],current_list:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_LIST":return Object.assign({},e,{loading:!0});case"FETCH_LIST":return Object(U.a)({},e,{loading:!1,lists:t.payload,current_list:t.current_list});case"SWITCH_LIST":return Object(U.a)({},e,{current_list:t.payload});case"ADD_MOVIE":return Object.assign({},e,{loading:!0});case"UPDATE_LIST":e.lists.indexOf(e.current_list),e.current_list.movies.length>0?[].concat(Object(z.a)(e.current_list.movies),[t.payload]):t.payload;var n=Object(U.a)({},e.current_list,{movies:[].concat(Object(z.a)(e.current_list.movies),[t.payload])});return Object(U.a)({},e,{current_list:n});case"REMOVE_MOVIE_FROM_LIST":return Object(U.a)({},e,{current_list:Object(U.a)({},e.current_list,{movies:e.current_list.movies.filter(function(e){return e.data_id!==t.payload.data_id})})});case"CREATE_LIST":return Object.assign({},e,{loading:!0});case"ADD_LIST":return console.log(t.payload),{loading:!1,lists:e.lists.concat(t.payload),current_list:Object(U.a)({},t.payload,{movies:[]})};case"DELETE_LIST":return Object.assign({},e,{loading:!0});case"REMOVE_LIST":var a=0===e.lists.indexOf(e.current_list)?e.lists[1]:e.lists[0];return{loading:!1,lists:e.lists.filter(function(t){return t.id!==e.current_list.id}),current_list:a};default:return e}};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,movie:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_MOVIE":return Object.assign({},e,{loading:!0});case"FETCH_MOVIE":return{loading:!1,movie:t.payload};case"CLEAR":return{loading:!1,movie:[]};default:return e}};var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,logged_in:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"LOG_IN":return console.log("LOG IN"),Object.assign({},e,{loading:!0});case"LOGGED_IN":return console.log("LOG IN SUCCESS"),{loading:!1,logged_in:!0};default:return e}},Q=Object(s.c)({search:q,lists:X,movie:$,user:K});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=Object(s.e)(Q,Object(s.d)(Object(s.a)(l.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));o.a.render(r.a.createElement(c.a,{store:Y},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.50cdca09.chunk.js.map